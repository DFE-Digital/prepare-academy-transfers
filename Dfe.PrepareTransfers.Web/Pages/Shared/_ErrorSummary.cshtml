@using Dfe.PrepareTransfers.Models
@using Dfe.PrepareTransfers.Services
@inject ErrorService ErrorService
@if (ErrorService.HasErrors())
{
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" tabindex="-1" data-module="govuk-error-summary">
        <div role="alert">
            <h2 class="govuk-error-summary__title" id="error-summary-title">
                There is a problem
            </h2>
            <div class="govuk-error-summary__body">
                <ul class="govuk-list govuk-error-summary__list" data-cy="error-summary">
                    @{
                        int errorCount = 0;
                    }
                    @foreach (Error error in ErrorService.GetErrors())
                    {
                        <li>
                            @if (error.Key?.Contains("/advisory-board-date") ?? false)
                            {
                                <a id="@($"{error.Key}-error-link")" href=@error.Key data-element-type="error-link" data-cy="error-message-@errorCount+=">@error.Message</a>
                            }
                            else if (!string.IsNullOrWhiteSpace(error.Key))
                            {
                                <a id="@($"{error.Key}-error-link")" href="#@error.Key" data-element-type="error-link" data-cy="error-message-@errorCount+=">@error.Message</a>
                            }
                            else
                            {
                                <a id="@(error.Key)" href="#@(error.Key)" data-element-type="error-link" data-cy="error-message-@errorCount+=">@error.Message</a>
                            }
                        </li>
                    }
                </ul>
            </div>
        </div>
    </div>
}